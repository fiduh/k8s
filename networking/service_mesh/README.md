#### What's a Service Mesh & Why do you need it?

    - Service mesh helps with East-West (Services to Service) Traffic management, without making changes to your code or having application developers write those logics inside of the the application.
    - By default services in a kubernetes cluster can talk to each other, so why still need a service mesh? Service mesh adds on capabilities that are not available by default to service to service communication, such as:
        - mTLS(secures the communication between services using certificates, generated by the service mesh)
        - Advanced deployment strategies (Canary/AB/Blue-Green deployments)
        - Observability (Service mesh like Istio integrates well with Kiali(Visualization tool for services in a cluster))
        - Circuit breaking, Traffic splitting, Fault injection, etc.

#### It's Istio implementation

    - In namespaces where Istio is enabled, Istio adds another conatiner(Sidecar container) to the existing contains in every pod.
    - The side car container is an envoy proxy server which handles traffic management of the pods. It intercepts traffic going in or out of containers in a pod.
    - IstioD is the primary component of Istio called the control plane.

#### Admission Controllers

    - How Istio adds Sidecar containers to every Pod, when a request is sent to the API server for a Pod creation, Istio should immediately be notified, so it can decide if it wants to add a Side car container to it, Istio uses an advanced concept Admission controllers called Dynamic Admission control or Admission webhook to achieve this.
    - A simple request to the API server, for instance a user wants to create a Pod in  Kubernetes Cluster (using kubectl apply ....), request goes to the API server, a component in the API server checks if the user is authenticated and authorized to perform this reuest or not, if the user is authenticated and authorized, then API server will take this object and persist(stores) it in etcd. Admission controllers can intercept(Mutate or Validate) the request before it's persisted in etcd.
    - For example, lets say you want to create a PVC and you didn't add a storageClass in the PVC object, before the resource is added to etcd, there's an admission controller called storageClass admission controller, it will check if the PVC has the storage class field or not, if it doesn't. It will mutate the object and add the field, then the object is persisted in etcd. There are about 30+ admission controllers available by default in every Kubernetes cluster, you don't have to install them, they are precompiled into the API server. sudo cat /etc/kubernetes/manifests/kube-apiserver.yaml . Check the command argument --enablle-admision-plugins
    - How Istio implements addmission controllers, if you look at all the other admission controllers, they are precompilled into the API server, API server clearly knows how to invoke them and what action will those admission controllers take, either mutate or validate an object. In the case of Istio to add a side car controller, Istio should know when a pod creation request comes to the API server and some how API server should notify Istio now you can proceed with the side car injection, the concept is called Dynamic Admission Control.
        - This happens in multiple stages, Pod creation request comes to the API server, API server performs Authentication and Authorization, then there are two special admission controllers "Mutating Admission webhook controller" and "Validation Admission webhook controller". The responsibilities of these controllers is to take requests from the API server and they notify Istio or any other project that wants to implement the side car injection or any kind of mutation and validation, these components do not directly perform the mutation and validation, it only forwards the requests to "ISTIOD Admission webhook(part of ISTIOD)", this ISTIOD webhook then performs the mutation logic(Injects the sidecar container) and object is persisted into etcd.

#### Sidecar Containers

#### ![Install & Configure Istio](https://istio.io/latest/docs/setup/getting-started/)

#### Enable Sidecar Injection

```bash
kubectl label namespace <namespace name> istio-injection=enabled

```

#### Traffic Management

#### Virtual services

#### Destination Rules

#### Circult Breaking

#### mTLS (Multual TLS)

#### Gateways

#### Observability

#### Service Mesh vs Ingress
